# 需提前了解的术语和概念

CSS 代码示例：

```css
.vocabulary {
    height: 99px;
    color: tansparent;
}
```

针对上述代码，逐一引出其涉及的专业术语：

1. 属性
   - 对应 CSS 的中文称谓
   - 例如 CSS 代码示例：height 和 color 都是属性
2. 值
   - 大多与数字挂钩
   - 常用类型
     - 整数值
       - 如 z-index: 1 中的 1，属于\<integer>，同时也属于\<number>
     - 数值
       - 如 line-height: 1.5 中的 1.5，属于 \<number>
     - 百分比值
       - 如 padding: 50%，属于 \<percent>
     - 长度值
       - 如 99px
     - 颜色值
       - 如 #999
     - 字符串值
     - 位置值
   - CSS3 中
     - 角度值
     - 频率值
     - 时间值
3. 关键字
   - 常见关键字
     - transparent
     - solid
   - 泛关键字 - 所有 CSS 属性都可以使用的关键字
     - inherit
4. 变量
   - CSS 目前可以称为变量的数量比较有限
   - CSS3 中的 currentColor 就是变量
5. 单位
   - 时间单位
     - s
     - ms
   - 角度单位
     - deg
     - rad
   - 长度单位
     - px
     - em
     - 与上述“值”的关系，比如 99px
       - \<number> + 单位 = 值
     - 绝对长度单位
       - px（最常使用）
       - pt
       - cm
       - mm
       - pc
     - 相对长度单位
       - 相对字体长度单位
         - em
         - ex
         - CSS3 新增
           - rem
           - ch（字符 O 的宽度）
       - 相对视区长度单位
         - vh
         - vw
         - vmin
         - vmax
6. 功能符
   - 值以函数的形式进行指定
   - 表示颜色
     - rgba()
     - hsla()
   - 背景图片地址
     - url()
   - 计算
     - calc()
   - 过渡效果
7. 属性值
   - 属性 + ：后的所有内容统一称为属性值
   - 属性值通常由 值 + 关键字 + 功能符
   - 属性值也可以由单一内容构成
     - z-index: 1
8. 声明
   - 属性名 + : + 属性值 + ; = 声明
   - color: tansparent;
9. 声明块
   - 由花括号（{}）包裹的一系列声明
10. 规则或规则集
    - 选择器 + 声明块 = 规则集
11. 选择器
    - 类选择器
      - .vocabulary
    - ID 选择器
      - #vocabulary
    - 属性选择器
      - [title]{}
      - [title="css-world"]{}
    - 伪类选择器
      - :first-child
    - 伪元素选择器
      - ::first-line
      - ::before
12. 关系选择器
    - 后代选择器
      - 空格连接
    - 相邻后代选择器
      - \> 连接
    - 兄弟选择器
      - ~ 连接
    - 相邻兄弟选择器
      - \+ 连接
13. @规则
    - 以 @ 字符开始的一些规则
    - @media
    - @font-face
    - @page
    - @support

## 未定义行为

当某个浏览器中出现与其他浏览器不一样的行为或样式表现的时候，我们总会习惯把这种不一样的表现认为是浏览器的 bug。但在 CSS 世界中，这种认识是狭隘的。

在 CSS 世界中，有 Web 标准来约束元素的行为，如果元素行为越界，可以称之为 bug。但由于 Web 应用场景千变万化，Web 标准也是不可能面面俱到的，也存在规范描述以外的场景。

对于上述情况，各大浏览器厂家会根据自己的理解与喜好去实现，那么显然会导致*元素的某个行为表现在浏览器中不一致*，此时不能称之为浏览器的 bug，用计算机领域的专业术语描述应该是“**未定义行为**（undefined behavior）”。

### 未定义行为的例子

CSS 世界的伪类中比较常用的是 “:active”，在 IE8 及以上版本的浏览器中行为表现非常统一，支持**非焦点元素**，鼠标按下，执行 :active 伪类对应的 CSS 样式，鼠标抬起还原。

> 非焦点元素
> 像 \<a>、\<button> 这样的元素，当我们使用键盘进行 Tab 建切换元素时，是可以被 focus 的，表现为*虚框*或者*外发光*，这类元素称为“焦点元素”
> 非焦点元素值没有设置 tabindex 属性的 \<div>、\<span> 等普通元素，在 IE6/IE7 浏览器下，非焦点元素对 :active 置若罔闻

通常情况下，:active 的表现都符合预期，但是，当遭遇其他一些处理的时候，事情就会变得不一样。

假设现在有一个 \<a> 标签模拟的按钮

CSS 代码：

```css
a:active {
    background-color: red;
}
```

假设此按钮的 DOM 对象变量名为 button，JS 代码：

```javascript
button.addEventListener("mousedown", function(event) {
    // ....
    // 鼠标按下时，阻止按钮的默认行为，这样设置可以让拖动效果更流畅
    event.preventDefault();
})
```

对于上述平淡无奇的一段代码，最后却发生了意想不到的情况：

Firefox 浏览器的 :active 失效了，鼠标按下去后 \<a> 并没有 UI 变化，按钮背景没有变红。其他所有浏览器如 IE 和 Chrome 浏览器 :active 正常生效，按钮背景变红，符合预期。

对于上述情况，是 Firefox 浏览器的 bug 吗？

其实，这并不是 bug，而是因为规范中并没有对这种场景的具体描述，所以 Firefox 认为 :active 发生在 mousedown 事件之后，无可厚非。

对于上述这种规范顾及不到的细枝末节的实现，就被称为“未定义行为”。
