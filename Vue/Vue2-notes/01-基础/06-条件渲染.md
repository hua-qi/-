# 条件渲染

## 目录

- [条件渲染](#条件渲染)
  - [目录](#目录)
  - [v-if](#v-if)
    - [在 \<template> 元素上使用 v-if 指令条件渲染分组](#在-template-元素上使用-v-if-指令条件渲染分组)
    - [使用 key 管理可复用的元素](#使用-key-管理可复用的元素)
  - [v-show](#v-show)
  - [v-show 与 v-if](#v-show-与-v-if)
  - [v-if 和 v-for](#v-if-和-v-for)

## v-if

- v-if 指令
  - 用于条件性地渲染一块内容
  - 该内容只会在指令的表达式返回 truthy 值时被渲染
- v-else-if 指令
  - 充当 v-if 的 “else-if” 块，可以扩展控制流
  - 使用 v-else-if 的元素必须紧跟在使用 v-if 的元素之后，否则不会被识别
- v-else 指令
  - 使用 v-else 的元素必须紧跟在使用 v-if 或 v-else-if 的元素之后，否则不会被识别

### 在 \<template> 元素上使用 v-if 指令条件渲染分组

由于 v-if 是一个指令，必须添加到一个元素上才能发挥作用，如何简洁明了地使用一个 truthy 值控制多个元素的渲染呢？

使用不可见的 \<template> 元素作为包裹元素，在其上使用 v-if 指令，最终的渲染结果将不包含 \<template> 元素。

### 使用 key 管理可复用的元素

Vue 会尽可能高效地渲染元素，通常会复用已有元素而不是重新渲染元素。

若使用 v-if、v-else 指令根据 truthy 值进行两个元素/模板之间的切换渲染，两个模板中的相同元素会被复用，“相同”仅对于元素而言，不包括其声明的属性，不同属性在元素复用时会被替换。

若该默认情况不符合实际需求，可以为两个模板的相同元素**各添加具唯一值的 key attribute**，此时在切换模板时，默认会复用的相同元素，会重新渲染。

[v-if 元素的 key 值使用-代码实例](00-demo/06-v-if%20元素的%20key%20值使用.html)

---

## v-show

v-show 指令亦可以实现根据条件判断是否**展示**元素。

**注**：使用 v-show 的元素始终会被构建在页面的 DOM 树中，v-show 控制元素显隐的底层是控制元素的 CSS property **display**。

- v-show 不支持 \<template> 元素
- v-show 不支持 v-else

---

## v-show 与 v-if

v-if 会确保在切换过程中，控制流的条件快内的事件监听器和子组件适当地被销毁和重建。

v-if 是**惰性的**：若组件在初始渲染时条件判断为假，则什么也不做，直到判断条件第一个为真时，才会开始渲染条件块。

使用 v-show 的元素总是被渲染，基于 CSS 进行控制元素显隐。

综上：

- v-if 有更高的切换开销
- v-show 有更高的初始渲染开销
  
使用场景：

- 若元素需要频繁的切换显隐，推荐使用 v-show
- 若元素在运行时其显隐控制条件很少改变，则使用 v-if 较好

## v-if 和 v-for

**注**：**不推荐**同时使用 v-if 和 v-for。

当 v-if 和 v-for 一起使用时，v-for 具有比 v-if 更高的优先级。
